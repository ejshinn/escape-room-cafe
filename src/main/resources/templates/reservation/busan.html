<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비트포비아 던전 예약하기(부산)</title>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>


    <style>
        strong {
            border: 1px solid black;
        }

        #res1 {
            border: 1px solid black;
        }

        #all {
            border: 1px solid black;
        }
        #container{
            margin-top: 100px;
            border: 1px solid black;
        }

        .list-group-btn {
            background-color: white;

            border: none;
            width: 100%;
            text-align: center;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
        }

        .list-group-btn a {
            text-decoration: none;
            color: black;
        }

        .list-group-btn:hover {
            background-color: orange;
        }

        .time-link {
            color: black;
            text-decoration: none;
        }

        .time-link:hover {
            background-color: orange;
        }

        .list-group-item {
            padding: 0;
        }

        .flex-column {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .list-unstyled {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .timebtn a{
            border-style:solid;
            border-color: #6ea8fe;
            padding: 10px 20px 10px 20px ;
            /*padding : T R B L;*/
            /*color: #6c757d;*/

        }
    </style>
    <script>
        $(document).ready(function (){

            let now = new Date(); // 현재 날짜 및 시간
            let nowHour = now.getHours(); // 시
            let nowMins = now.getMinutes(); // 분

            console.log(nowHour); // 12시 51분 기준 12 51로 잘 뜸
            console.log(nowMins);


            // value 값에 10:00 넣으면 스트링 형태로 들어가서 어떻게 비교해야할지 모르겠음
            // 일단은 숫자로만 넣고 비교해서 비활성화
            let partTime1 = document.getElementById("part1").getAttribute('data-value');
            let partTime2 = document.getElementById("part2").getAttribute('data-value');
            let partTime3 = document.getElementById("part3").getAttribute('data-value');
            let partTime4 = document.getElementById("part4").getAttribute('data-value');
            let partTime5 = document.getElementById("part5").getAttribute('data-value');
            let partTime6 = document.getElementById("part6").getAttribute('data-value');


            if (nowHour >= partTime1) {
                // a 태그 사용 시 비활성화
                document.querySelector("#part1").removeAttribute('href');
                $("#part1").css("background-color", "#6c757d");

                // 버튼 태그 사용 시 비활성화
                // $("#part1").attr("disabled",true);
            }

            if (nowHour >= partTime2) {
                document.querySelector("#part2").removeAttribute('href');
                $("#part2").css("background-color", "#6c757d");
            }
            if (nowHour >= partTime3) {
                document.querySelector("#part3").removeAttribute('href');
                $("#part3").css("background-color", "#6c757d");
            }
            if (nowHour >= partTime4) {
                document.querySelector("#part4").removeAttribute('href');
                $("#part4").css("background-color", "#6c757d");
            }
            if (nowHour >= partTime5) {
                document.querySelector("#part5").removeAttribute('href');
                $("#part5").css("background-color", "#6c757d");
            }
            if (nowHour >= partTime6) {
                document.querySelector("#part6").removeAttribute('href');
                $("#part6").css("background-color", "#6c757d");
            }


            // 예약자 정보 받아서 if 문으로 비교 ???
            let val1 = 1;
            let val2 = 1;
            $.ajax({
                url: "/ajax/restimelist",
                type: "POST",
                data: {cafeIdx: val1, themeIdx:val2},
                dataType: "json",
                success: function (data) {
                    // 예약 데이터 끌고와서 버튼 값이랑 비교
                    // 같은 시간이 있으면 비활성화
                    for(let i =0 ; i< data.length; i++){
                        console.log(data[i].resTime);
                        if(data[i].resTime == partTime6){
                            console.log("예약 시간 같음")
                            document.querySelector("#part6").removeAttribute('href');
                            $("#part6").css("background-color", "pink");
                        }
                    }
                    console.log("통신성공");
                },
                error : function (){
                    alert("통신 중 오류 발생");
                }
            });



            // 버튼 사용시 페이지 이동
            // $("#part2").click(function() {
            //    location.href = "/hongdae/1/2/10"
            // });


        });
    </script>

</head>

<body>
<div id="container">
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-3 bg-secondary bg-opacity-25" id="all">
                <h4 class="text-center mb-5 p-4"><b>RESERVATION</b></h4>
                <div class="container mt-5">
                    <div class="row">
                        <ul class="list-group center mb-5 p-4 ">
                            <li class="list-group-item">
                                <button type="submit" class="list-group-btn"><a href="/hongdae" id="hongdae" th:href="@{/hongdae/1}">홍대던전</a></button>
                            </li>
                            <li class="list-group-item mt-5">
                                <button class="list-group-btn"><a href="/gangnam" id="gangname" th:href="@{/gangnam/2}">강남던전</a></button>
                            </li>
                            <li class="list-group-item mt-5">
                                <button class="list-group-btn"><a href="/busanred" id="busanred" th:href="@{/busanred/6}">서면던전 레드(부산)</a></button>
                            </li>
                            <!--                            <li class="list-group-item mt-5">-->
                            <!--                                <button class="list-group-btn"><a href="/hongdaetwo" id="hongdaetwo" >홍대던전Ⅲ</a></button>-->
                            <!--                            </li>-->
                            <!--                            <li class="list-group-item mt-5">-->
                            <!--                                <button class="list-group-btn"><a href="/gangnamtwo"id="gangnametwo">강남던전Ⅱ</a></button>-->
                            <!--                            </li>-->
                            <!--                            <li class="list-group-item mt-5">-->
                            <!--                                <button class="list-group-btn"><a href="/gangnamluna"id="luna">던전루나(강남)</a></button>-->
                            <!--                            </li>-->
                            <!--                            <li class="list-group-item mt-5">-->
                            <!--                                <button class="list-group-btn"><a href="/busan" id="busan">서면던전(부산)</a></button>-->
                            <!--                            </li>-->
                            <!--                            <li class="list-group-item mt-5">-->
                            <!--                                <button class="list-group-btn"><a href="#" id="dun">던전101</a></button>-->
                            <!--                            </li>-->
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-9">
                <div class="container text-center">
                    <div class="row row-cols-3">
                        <div class="col-3" style="background-color: chocolate;">예약하기</div>
                        <div class="col-3">예약정보입력</div>
                        <div class="col-3">결제하기</div>
                        <div class="col-3">예약완료</div>
                    </div>
                </div>

                <div class="row mt-2">
                    <form>
                        <input type="date" id="date">
                    </form>
                </div>

                <div class="row mt-2 border h-100">
                    <!--테마포스터 라인-->
                    <div class="col-4 border h-100">
                        <div class="row border" style="height: 250px"
                             th:if="${#lists.size(themeList)}>0" th:each="item:${themeList}" >
                            <img th:src="@{${item.imgUrl}}" alt="#" class="p-0" style="width: 185px; height:185px; ">
                            <p th:text="${item.title}"></p>
                        </div>
                    </div>
                    <!--타임테이블 라인-->

                    <div class="col-8 border h-100">
                        <div class="row border timebtn " style="height: 250px">
                            <div class="align-content-center">
                                <a href="/hongdae/1/1/10" id="part1" data-value="10">10:00</a>
                                <a href="/hongdae/1/2/12" id="part2" data-value="12">12:00</a>
                                <a href="/hongdae/1/3/14" id="part3" data-value="14">14:00</a>
                                <button disabled>test</button>
                            </div>
                            <div >
                                <a href="#" id="part4" data-value="16">16:30</a>
                                <a href="#" id="part5" data-value="18">18:00</a>
                                <a href="#" id="part6" data-value="20">20:30</a>
                            </div>
                        </div>
                        <div class="row border" style="height: 300px">  </div>
                        <div class="row border" style="height: 300px">  </div>
                        <div class="row border" style="height: 300px">  </div>
                    </div>
                </div>

                <!--                <div class="col-3">-->
                <!--                    <div class="d-flex">-->
                <!--                        <div class="d-flex flex-column align-items-center">-->
                <!--                            <img src="${}" style="width: 180px;">-->
                <!--                            <strong>던전 제목1</strong>-->
                <!--                        </div>-->
                <!--                        <ul id="time" class="d-flex col-6 list-unstyled text-center my-5 p-4">-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="" class="time-link">12:00</a></li>-->
                <!--                        </ul>-->
                <!--                    </div>-->
                <!--                </div>-->
                <!--                <div class="col-3">-->
                <!--                    <div class="d-flex">-->
                <!--                        <div class="flex-column align-items-center">-->
                <!--                            <img src="#" style="width: 180px;">-->
                <!--                            <strong>던전 제목2</strong>-->
                <!--                        </div>-->
                <!--                        <ul class="d-flex col-6 list-unstyled text-center my-5 p-4">-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="#" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="#" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="#" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="#" class="time-link">12:00</a></li>-->
                <!--                        </ul>-->
                <!--                    </div>-->
                <!--                </div>-->
                <!--                <div class="col-3">-->
                <!--                    <div class="d-flex">-->
                <!--                        <div class="flex-column align-items-center">-->
                <!--                            <img src="C:\fullstack405\img\테마3.png" style="width: 180px;">-->
                <!--                            <strong>던전 제목3</strong>-->
                <!--                        </div>-->
                <!--                        <ul class="d-flex col-6 list-unstyled text-center my-5 p-4">-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="res1.html" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="res1.html" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="res1.html" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="res1.html" class="time-link">12:00</a></li>-->
                <!--                        </ul>-->
                <!--                    </div>-->
                <!--                </div>-->
                <!--                <div class="col-3">-->
                <!--                    <div class="d-flex">-->
                <!--                        <div class="d-flex flex-column align-items-center">-->
                <!--                            <img src="C:\fullstack405\img\테마1.png" style="width: 180px;">-->
                <!--                            <strong>던전 제목4</strong>-->
                <!--                        </div>-->
                <!--                        <ul class="d-flex col-6 list-unstyled text-center my-5 p-4">-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="res1.html" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="res1.html" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="res1.html" class="time-link">12:00</a></li>-->
                <!--                            <li class="border solid 1px m-3 p-2"><a href="res1.html" class="time-link">12:00</a></li>-->
                <!--                        </ul>-->
                <!--                    </div>-->
                <!--                </div>-->
            </div>
        </div>
    </div>
    <div class="container">
        <h3>입장 제한 및 환불불가 안내</h3>
        <div>
            <ul>
                <li><b>1.지각 및 NO SHOW</b>
                    <P>테마는 시간대 별 예약으로 진행되어, 최소 테마 시작 10분 전 도착하여야 합니다. NO SHOW(불참)의 경우 환불 불가합니다.</P>
                </li>
                <li><b>2. 과도한 음주자</b>
                    <p>과도한 음주 후 플레이는 입장이 제한될 수 있습니다.</p>
                </li>
                <li><b>3. 폐쇄공포증 및 심장 질환자, 임산부</b>
                    <p>게임 진행 공간은 해당 테마에 맞춰 최대한 리얼리티를 살리도록 설계 되었습니다.</p>
                    <p>경우에 따라 공간이 폐쇄되어 갇히거나 놀라는 연출이 있을 수 있으므로 관련된 질병이나 신체 장애가 있는 분들은 예약 전 각 매장으로 문의 부탁드립니다.</p>
                </li>
            </ul>
        </div>
    </div>
</div>
</body>

</html>