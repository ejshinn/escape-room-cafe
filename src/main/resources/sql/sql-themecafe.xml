<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bitc.fullstack405.team2.mainThemePop.ThemeMapper">
    <select id="selectThemeCafeList" resultType="bitc.fullstack405.team2.mainThemePop.ThemeCafeDTO" parameterType="int">
        select
            theme_id, title, theme_rank, genre, synopsis, people_limit, playtime, payment, img_url, name
        from
            theme
        join
            cafe
        on
            theme.cafe_id = cafe.cafe_id
        where
            theme.cafe_id = 1
    </select>

    <select id="mainItemsList" resultType="bitc.fullstack405.team2.mainThemePop.ThemeCafeDTO" parameterType="int">
        select
            theme_id, title, theme_rank, genre, synopsis, people_limit, playtime, payment, img_url, name
        from
            theme
        join
            cafe
        on
            theme.cafe_id = cafe.cafe_id
        where
            theme.cafe_id = #{cafeId}
    </select>

    <select id="selectTheme" resultType="bitc.fullstack405.team2.mainThemePop.ThemeCafeDTO" parameterType="int">
        select
            title, people_limit, playtime, payment, img_url, name
        from
            theme
        join
            cafe
        on
            theme.cafe_id = cafe.cafe_id
        where
            theme.theme_id = #{themeId}
    </select>

    <select id="selectReviewList" resultType="bitc.fullstack405.team2.mainThemePop.ThemeCafeDTO" parameterType="map">
        select
            board_idx, title, cafe_id, theme_id
        from
            communication
        where
            cafe_id = #{cafeId}
        and
            theme_id = #{themeId}
        order by
            board_idx
        desc
    </select>


</mapper>